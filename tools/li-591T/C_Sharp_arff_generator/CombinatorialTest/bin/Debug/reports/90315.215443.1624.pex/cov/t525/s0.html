<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html>
<!-- saved from url=(0033)http://research.microsoft.com/pex -->
<head><link rel="StyleSheet" href="..\..\er.common.css" type="text/css" /><script src="..\..\er.common.js" type="text/javascript"> </script><link rel="StyleSheet" href="..\..\log.css" type="text/css" /><link rel="StyleSheet" href="..\..\pex.css" type="text/css" /><script src="..\..\pex.js" type="text/javascript"> </script><link rel="SHORTCUT ICON" href="favicon.ico" /><link rel="icon" href="favicon.ico" type="image/x-icon" /><title>C:\MyWorkspace\li-591T\C_Sharp_arff_generator\CombinatorialTest\TCAS.cs</title></head><body><div class="banner"><div class="imageleft"><a href="http://beta.research.microsoft.com/en-us/um/redmond/projects/pex/wiki/WebHome.html"><img class="button" src="..\..\reportlogo.png" alt="logo" width="100" height="60" /></a></div></div><h2 id="top">C:\MyWorkspace\li-591T\C_Sharp_arff_generator\CombinatorialTest\TCAS.cs</h2><div class="toggle"><p class="copyright"><a class="usercodeundertestcovered">user code under test</a>, 
  <span class="usercodeundertestnotcovered">user code under test (not covered)</span>, 
  <a class="userortestcodecovered">user code or test</a>, 
  <span class="userortestcodenotcovered">user code or test (not covered)</span>,
  <span class="tagged">tagged</span></p><table><tr><th>Modules/Types/Methods</th><th colspan="2"><a href="http://research.microsoft.com/en-us/um/redmond/projects/pex/wiki/Coverage.html">Dynamic Coverage</a> (blocks)</th></tr><tr><th /><th>User Code Under Test</th><th>User Or Test Code</th></tr></table><div class="toggle"><a class="button" href="#ID0EL">first</a><pre class="coverage">using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Pex.Framework;
using System.IO;

namespace CombinatorialTest
{
    [PexClass]
    public partial class TCAS
    {

        /*  -*- Last-Edit:  Fri Jan 29 11:13:27 1993 by Tarak S. Goradia; -*- */
        /* $Log: tcas.c,v $
         * Revision 1.2  1993/03/12  19:29:50  foster
         * Correct logic bug which didn't allow output of 2 - hf
         * */

        //#include &lt;stdio.h&gt;

        static int OLEV = 600;	/* in feets/minute */
        static int MAXALTDIFF = 600;		/* max altitude difference in feet */
        static int MINSEP = 300;          /* min separation in feet */
        static int NOZCROSS = 100;		/* in feet */
        /* variables */

        //typedef int bool;

        static int Cur_Vertical_Sep;
        static bool High_Confidence;
        static bool Two_of_Three_Reports_Valid;

        static int Own_Tracked_Alt;
        static int Own_Tracked_Alt_Rate;
        static int Other_Tracked_Alt;

        static int Alt_Layer_Value;		/* 0, 1, 2, 3 */
        static int[] Positive_RA_Alt_Thresh = new int[4];

        static int Up_Separation;
        static int Down_Separation;

        /* state variables */
        static int Other_RAC;			/* NO_INTENT, DO_NOT_CLIMB, DO_NOT_DESCEND */
        static int NO_INTENT = 0;
        static int DO_NOT_CLIMB = 1;
        static int DO_NOT_DESCEND = 2;

        static int Other_Capability;		/* TCAS_TA, OTHER */
        static int TCAS_TA = 1;
        static int OTHER = 2;

        static bool Climb_Inhibit;		/* true/false */

        static int UNRESOLVED = 0;
        static int UPWARD_RA = 1;
        static int DOWNWARD_RA = 2;

        private static void initialize()
        <span id="ID0EL"><a class="button" href="#top">top</a>|<a class="button" href="#ID0E3E">next</a></span><a class="userortestcodecovered">{</a>
            <a class="userortestcodecovered">Positive_RA_Alt_Thresh[0] = 400;</a>
            <a class="userortestcodecovered">Positive_RA_Alt_Thresh[1] = 500;</a>
            <a class="userortestcodecovered">Positive_RA_Alt_Thresh[2] = 640;</a>
            <a class="userortestcodecovered">Positive_RA_Alt_Thresh[3] = 740;</a>
        <a class="userortestcodecovered">}</a>

        private static int ALIM()
        <a class="button" href="#ID0EL">prev</a>|<span id="ID0E3E"><a class="button" href="#top">top</a>|<a class="button" href="#ID0ECH">next</a></span><a class="userortestcodecovered">{</a>
            <a class="userortestcodecovered">return Positive_RA_Alt_Thresh[Alt_Layer_Value];</a>
        <a class="userortestcodecovered">}</a>

        private static int Inhibit_Biased_Climb()
        <a class="button" href="#ID0EL">prev</a>|<span id="ID0ECH"><a class="button" href="#top">top</a>|<a class="button" href="#ID0EFBAC">next</a></span><a class="userortestcodecovered">{</a>
            <a class="userortestcodecovered">return (Climb_Inhibit ? Up_Separation + NOZCROSS : Up_Separation);</a>
        <a class="userortestcodecovered">}</a>

        private static bool Non_Crossing_Biased_Climb()
        <a class="button" href="#ID0EL">prev</a>|<span id="ID0EFBAC"><a class="button" href="#top">top</a>|<a class="button" href="#ID0EQIAC">next</a></span><a class="userortestcodecovered">{</a>
            bool upward_preferred;
            int upward_crossing_situation;
            <a class="userortestcodecovered">bool result=false;</a>

            <a class="userortestcodecovered">upward_preferred = Inhibit_Biased_Climb() &gt; Down_Separation;</a>
            <a class="userortestcodecovered">if (upward_preferred)</a>
            <a class="userortestcodecovered">{</a>
                //PexAssume.IsTrue(Down_Separation == ALIM() &amp;&amp; result);
                <a class="userortestcodecovered">result = !(Own_Below_Threat()) || ((Own_Below_Threat()) &amp;&amp; (!(Down_Separation &gt; ALIM())));</a> /* opertor mutation */
            <a class="userortestcodecovered">}</a>
            else
            <a class="userortestcodecovered">{</a>
                <a class="userortestcodecovered">result = Own_Above_Threat() &amp;&amp; (Cur_Vertical_Sep &gt;= MINSEP) &amp;&amp; (Up_Separation &gt;= ALIM());</a>
            <a class="userortestcodecovered">}</a>
            <a class="userortestcodecovered">return result;</a>
        <a class="userortestcodecovered">}</a>

        private static bool Non_Crossing_Biased_Descend()
        <a class="button" href="#ID0EL">prev</a>|<span id="ID0EQIAC"><a class="button" href="#top">top</a>|<a class="button" href="#ID0EKPAC">next</a></span><a class="userortestcodecovered">{</a>
            bool upward_preferred;
            int upward_crossing_situation;
            bool result;

            <a class="userortestcodecovered">upward_preferred = Inhibit_Biased_Climb() &gt; Down_Separation;</a>
            <a class="userortestcodecovered">if (upward_preferred)</a>
            <a class="userortestcodecovered">{</a>
                <a class="userortestcodecovered">result = Own_Below_Threat() &amp;&amp; (Cur_Vertical_Sep &gt;= MINSEP) &amp;&amp; (Down_Separation &gt;= ALIM());</a>
            <a class="userortestcodecovered">}</a>
            else
            <a class="userortestcodecovered">{</a>
                <a class="userortestcodecovered">result = !(Own_Above_Threat()) || ((Own_Above_Threat()) &amp;&amp; (Up_Separation &gt;= ALIM()));</a>
            <a class="userortestcodecovered">}</a>
            <a class="userortestcodecovered">return result;</a>
        <a class="userortestcodecovered">}</a>

        private static bool Own_Below_Threat()
        <a class="button" href="#ID0EL">prev</a>|<span id="ID0EKPAC"><a class="button" href="#top">top</a>|<a class="button" href="#ID0EFBAE">next</a></span><a class="userortestcodecovered">{</a>
            <a class="userortestcodecovered">return (Own_Tracked_Alt &lt; Other_Tracked_Alt);</a>
        <a class="userortestcodecovered">}</a>

        private static bool Own_Above_Threat()
        <a class="button" href="#ID0EL">prev</a>|<span id="ID0EFBAE"><a class="button" href="#top">top</a>|<a class="button" href="#ID0E6CAE">next</a></span><a class="userortestcodecovered">{</a>
            <a class="userortestcodecovered">return (Other_Tracked_Alt &lt; Own_Tracked_Alt);</a>
        <a class="userortestcodecovered">}</a>

        private static int alt_sep_test()
        <a class="button" href="#ID0EL">prev</a>|<span id="ID0E6CAE"><a class="button" href="#top">top</a>|<a class="button" href="#ID0EXPAE">next</a></span><a class="userortestcodecovered">{</a>
            bool enabled, tcas_equipped, intent_not_known;
            bool need_upward_RA, need_downward_RA;
            int alt_sep;

            <a class="userortestcodecovered">enabled = High_Confidence &amp;&amp; (Own_Tracked_Alt_Rate &lt;= OLEV) &amp;&amp; (Cur_Vertical_Sep &gt; MAXALTDIFF);</a>
            <a class="userortestcodecovered">tcas_equipped = Other_Capability == TCAS_TA;</a>
            <a class="userortestcodecovered">intent_not_known = Two_of_Three_Reports_Valid &amp;&amp; Other_RAC == NO_INTENT;</a>

            <a class="userortestcodecovered">alt_sep = UNRESOLVED;</a>

            <a class="userortestcodecovered">if (enabled &amp;&amp; ((tcas_equipped &amp;&amp; intent_not_known) || !tcas_equipped))</a>
            <a class="userortestcodecovered">{</a>
                <a class="userortestcodecovered">need_upward_RA = Non_Crossing_Biased_Climb() &amp;&amp; Own_Below_Threat();</a>
                <a class="userortestcodecovered">need_downward_RA = Non_Crossing_Biased_Descend() &amp;&amp; Own_Above_Threat();</a>
                <a class="userortestcodecovered">if (need_upward_RA &amp;&amp; need_downward_RA)</a>
                    /* unreachable: requires Own_Below_Threat and Own_Above_Threat
                       to both be true - that requires Own_Tracked_Alt &lt; Other_Tracked_Alt
                       and Other_Tracked_Alt &lt; Own_Tracked_Alt, which isn't possible */
                    <span class="userortestcodenotcovered">alt_sep = UNRESOLVED;</span>
                else <a class="userortestcodecovered">if (need_upward_RA)</a>
                <a class="userortestcodecovered">{</a>
                    <a class="userortestcodecovered">alt_sep = UPWARD_RA;</a>                    
                <a class="userortestcodecovered">}</a>
                else <a class="userortestcodecovered">if (need_downward_RA)</a>
                    <a class="userortestcodecovered">alt_sep = DOWNWARD_RA;</a>
                else
                    <a class="userortestcodecovered">alt_sep = UNRESOLVED;</a>
            <a class="userortestcodecovered">}</a>

            <a class="userortestcodecovered">return alt_sep;</a>
        <a class="userortestcodecovered">}</a>

        [PexMethod(MaxRuns = 20, MaxConditions = int.MaxValue, MaxRunsWithoutNewTests = int.MaxValue)]
        public void TCASMain(int[] argv)
        <a class="button" href="#ID0EL">prev</a>|<span id="ID0EXPAE"><a class="button" href="#top">top</a></span><a class="userortestcodecovered">{</a>
            <a class="userortestcodecovered">if (argv.Length &lt; 13)</a>
            <a class="userortestcodecovered">{</a>
                <a class="userortestcodecovered">return;</a>
            }
            <a class="userortestcodecovered">initialize();</a>
            <a class="userortestcodecovered">Cur_Vertical_Sep = argv[1];</a>
            <a class="userortestcodecovered">High_Confidence = (argv[2] == 1);</a>
            <a class="userortestcodecovered">Two_of_Three_Reports_Valid = (argv[3] == 1);</a>
            <a class="userortestcodecovered">Own_Tracked_Alt = argv[4];</a>
            <a class="userortestcodecovered">Own_Tracked_Alt_Rate = argv[5];</a>
            <a class="userortestcodecovered">Other_Tracked_Alt = argv[6];</a>
            <a class="userortestcodecovered">Alt_Layer_Value = argv[7];</a>
            <a class="userortestcodecovered">Up_Separation = argv[8];</a>
            <a class="userortestcodecovered">Down_Separation = argv[9];</a>
            <a class="userortestcodecovered">Other_RAC = argv[10];</a>
            <a class="userortestcodecovered">Other_Capability = argv[11];</a>
            <a class="userortestcodecovered">Climb_Inhibit = (argv[12] == 1);</a>

            <a class="userortestcodecovered">int result = alt_sep_test();</a>
            <a class="userortestcodecovered">PexStore.Value("PC", PexSymbolicValue.GetPathConditionString());</a>
            <a class="userortestcodecovered">PexStore.Value("Result", result);</a>     
            
            
        <a class="userortestcodecovered">}</a>

    }
}
</pre></div></div><hr /><table width="100%"><tr><td valign="top"><span class="copyright">Copyright (c) Microsoft Corporation. All rights reserved.</span><br /><span class="button" onclick="copySourceToClipboard()">Copy full source to clipboard</span><span class="hint">|</span><a class="smallbutton" href="http://research.microsoft.com/en-us/um/redmond/projects/pex/wiki/Creating A Stand Alone Repro.html">How to create a stand alone repro</a></td><td align="right" valign="top"><span class="copyright">
            Pex v.
          </span><br /></td></tr></table><div id="debugdiv"> </div></body></html>